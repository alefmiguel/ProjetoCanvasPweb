<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title> DETECÇÃO DE COLISÕES </title>
	<script src="colisor.js"></script>
	<script src="bola.js"></script>
	<link rel="stylesheet" href="colisoes.css">
</head>
<body>
	<canvas id="canvas-colisao" width="500" height="500"></canvas>

	<script> // SCRIPT PRINCIPAL

		// CAPTURA E CONTEXTUALIZAÇÃO 2D
		var canvas = document.querySelector('#canvas-colisao');
		var ctx = canvas.getContext('2d');

		// PRIMEIRA BOLA P/ COLISÃO
		var b1 = new Bola(ctx);
		b1.x = 200;
		b1.y = 200;
		b1.velocidadeX = 10;
		b1.velocidadeY = -5;
		b1.cor = 'black';
		b1.raio = 20;

		// SEGUNDA BOLA P/ COLISÃO
		var b2 = new Bola(ctx);
		b2.x = 300;
		b2.y = 300;
		b2.velocidadeX = -5;
		b2.velocidadeY = 10;
		b2.cor = 'purple';
		b2.raio = 30;

		var colisor = new Colisor();
		colisor.novoSprite(b1);
		colisor.novoSprite(b2);
		
		requestAnimationFrame(animar);

		function animar() {
			// para que não fique o rastro
			ctx.clearRect(0, 0, canvas.width, canvas.height);
		
			b1.atualizar();
			b2.atualizar();

			b1.desenhar();
			b2.desenhar();

			colisor.processar();

			requestAnimationFrame(animar); // ciclo repete
		}

		var colisor = new Colisor();
		colisor.novoSprite(b1);
		colisor.novoSprite(b2);

		colisor.aoColidir = function(s1, s2) {
			// resposta única
			alert('PÁ'); 
		}
	</script>
</body>
</html> 